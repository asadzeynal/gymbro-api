// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.17.2
// source: templates.sql

package db

import (
	"context"

	uuid "github.com/gofrs/uuid/v5"
)

const addTemplate = `-- name: AddTemplate :one
INSERT INTO templates(id, name, user_id)
    VALUES ($1, $2, $3)
RETURNING
    id
`

type AddTemplateParams struct {
	ID     uuid.UUID
	Name   string
	UserID uuid.UUID
}

func (q *Queries) AddTemplate(ctx context.Context, arg AddTemplateParams) (uuid.UUID, error) {
	row := q.db.QueryRow(ctx, addTemplate, arg.ID, arg.Name, arg.UserID)
	var id uuid.UUID
	err := row.Scan(&id)
	return id, err
}

const addTemplateExercise = `-- name: AddTemplateExercise :exec
INSERT INTO template_exercises(id, template_id, exercise_id, display_order)
    VALUES ($1, $2, $3, $4)
`

type AddTemplateExerciseParams struct {
	ID           uuid.UUID
	TemplateID   uuid.UUID
	ExerciseID   uuid.UUID
	DisplayOrder int32
}

func (q *Queries) AddTemplateExercise(ctx context.Context, arg AddTemplateExerciseParams) error {
	_, err := q.db.Exec(ctx, addTemplateExercise,
		arg.ID,
		arg.TemplateID,
		arg.ExerciseID,
		arg.DisplayOrder,
	)
	return err
}

const addTemplateSet = `-- name: AddTemplateSet :exec
INSERT INTO template_sets(id, reps, weight, template_exercise_id)
    VALUES ($1, $2, $3, $4)
`

type AddTemplateSetParams struct {
	ID                 uuid.UUID
	Reps               int32
	Weight             float64
	TemplateExerciseID uuid.UUID
}

func (q *Queries) AddTemplateSet(ctx context.Context, arg AddTemplateSetParams) error {
	_, err := q.db.Exec(ctx, addTemplateSet,
		arg.ID,
		arg.Reps,
		arg.Weight,
		arg.TemplateExerciseID,
	)
	return err
}

const getTemplateExercisesByTemplateIds = `-- name: GetTemplateExercisesByTemplateIds :many
SELECT
    id, template_id, exercise_id, display_order, created_at, updated_at
FROM
    template_exercises
WHERE
    template_id IN ($1::uuid[])
`

func (q *Queries) GetTemplateExercisesByTemplateIds(ctx context.Context, dollar_1 []uuid.UUID) ([]TemplateExercise, error) {
	rows, err := q.db.Query(ctx, getTemplateExercisesByTemplateIds, dollar_1)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []TemplateExercise
	for rows.Next() {
		var i TemplateExercise
		if err := rows.Scan(
			&i.ID,
			&i.TemplateID,
			&i.ExerciseID,
			&i.DisplayOrder,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getTemplateSetsByTemplateExerciseIds = `-- name: GetTemplateSetsByTemplateExerciseIds :many
SELECT
    id, template_exercise_id, reps, weight, created_at, updated_at
FROM
    template_sets
WHERE
    template_exercise_id IN ($1::uuid[])
`

func (q *Queries) GetTemplateSetsByTemplateExerciseIds(ctx context.Context, dollar_1 []uuid.UUID) ([]TemplateSet, error) {
	rows, err := q.db.Query(ctx, getTemplateSetsByTemplateExerciseIds, dollar_1)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []TemplateSet
	for rows.Next() {
		var i TemplateSet
		if err := rows.Scan(
			&i.ID,
			&i.TemplateExerciseID,
			&i.Reps,
			&i.Weight,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getTemplatesByUserId = `-- name: GetTemplatesByUserId :many
SELECT
    id, name, user_id, created_at, updated_at
FROM
    templates
WHERE
    user_id = $1
`

func (q *Queries) GetTemplatesByUserId(ctx context.Context, userID uuid.UUID) ([]Template, error) {
	rows, err := q.db.Query(ctx, getTemplatesByUserId, userID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []Template
	for rows.Next() {
		var i Template
		if err := rows.Scan(
			&i.ID,
			&i.Name,
			&i.UserID,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}
